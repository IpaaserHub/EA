# EA市場分析と自社EA比較レポート

## 1. 市場で人気のEA機能一覧

### 売れ筋EA共通機能

| 機能カテゴリ | 人気EAの機能 | 当社EA | 対応状況 |
|-------------|-------------|--------|---------|
| **AI/ML** | LSTM/Transformer、ニューラルネットワーク | ルールベース(ADX+RSI+Slope) | △ 未実装 |
| **リスク管理** | 複数TP、BE(ブレークイーブン)、トレーリングストップ | v9.0で実装済み | ○ 実装済 |
| **マルチペア** | 5-16通貨ペア同時対応 | 1ペアずつ | △ 未実装 |
| **グリッド/ナンピン** | 高度なグリッド戦略 | 非対応（安全） | ○ 意図的 |
| **自動最適化** | パラメータ自動調整 | 手動調整のみ | × 未実装 |
| **GUIパネル** | 手動取引パネル統合 | なし | × 未実装 |
| **VPS対応** | 24時間稼働推奨 | 対応可能 | ○ |

---

### トップEA詳細比較

#### Quantum Queen（MQL5史上最高売上）
- **価格**: $2,000+
- **特徴**: XAUUSD(ゴールド)専用、20ヶ月以上のライブ実績
- **強み**: ゴールドに完全特化した最適化

#### 異国の殴り込みGOLD（日本市場人気）
- **価格**: ¥25,000程度
- **PF**: 5.79（驚異的）
- **勝率**: 91.9%
- **特徴**: ナンピン・マーチン不使用、高ボラ対応

#### Forex Flex EA
- **価格**: $350
- **特徴**: 30日返金保証、12以上の戦略選択可能
- **強み**: カスタマイズ性、長期実績3年以上

---

## 2. 当社EAの強みと弱み

### 強み ✅

#### 安全設計
- ナンピン・マーチンなし（口座破綻リスク低）
- ATRベース動的SL/TP
- リスクリワード1.0以上フィルター

#### トレンドフォロー特化
- 線形回帰によるトレンド判定
- 押し目買い・戻り売りロジック
- ADX/RSIによる相場環境認識

#### 拡張性
- Pythonサーバー構成（ML導入容易）
- APIベース（他システム連携可能）

#### 透明性
- ロジック完全公開（ブラックボックスでない）
- 学習・カスタマイズ可能

### 弱み ❌

#### ~~リスク管理機能の不足~~ → v9.0で解決
- ~~トレーリングストップなし~~ → **実装済み**
- ~~ブレークイーブン機能なし~~ → **実装済み**
- ~~分割決済なし~~ → **実装済み**

#### AIの不在
- 現在はルールベースのみ
- 市場の売れ筋はAI/ML搭載

#### 勝率・PFの低さ（バックテスト結果）
- 現在PF: 0.93〜0.99
- 人気EA: PF 4.0-5.7、勝率90%+

#### UX/操作性
- GUIパネルなし
- 設定が複雑

#### マルチペア非対応
- 1ペアずつ設定必要

---

## 3. 踏襲すべき機能（優先度順）

### 優先度：高（勝率・収益に直結）

1. **トレーリングストップ** ✅ 実装済み
   - 実装難易度: 低
   - 効果: FalseHold削減、利益最大化
   - 参考: 多くのEAで標準搭載

2. **ブレークイーブン機能** ✅ 実装済み
   - 一定利益で損切りラインを建値に移動
   - 実装難易度: 低
   - 効果: 負けトレードをゼロにする

3. **早期損切り強化** ✅ 実装済み
   - 逆トレンド検知時の即時撤退
   - 現在: v9.0で実装済み

### 優先度：中（差別化要素）

4. **分割決済（部分利確）** ✅ 実装済み
   - 50%到達で半分決済、残りで伸ばす
   - 実装難易度: 中
   - 効果: 勝率向上 + 利益確保

5. **時間帯フィルター強化**
   - ゴールドは特定時間帯に動きやすい
   - NY・ロンドンセッション重視

6. **ボラティリティフィルター**
   - 低ボラ時はエントリー見送り
   - 高ボラ時はSL/TP調整

### 優先度：低（将来的）

7. **ニューラルネットワーク導入**
   - LSTM/Transformer
   - 実装難易度: 高
   - 市場トレンドとしては必須

8. **GUIパネル**
   - 手動介入機能
   - ユーザー体験向上

---

## 4. v9.0実装結果

### 実装した機能

#### 1. トレーリングストップ
**目的**: 利益を伸ばしながらSL到達を回避

```python
# 利益が一定額を超えたら、SLを動的に調整
if profit >= trailing_start:  # 例: +30円
    new_sl = current_price - trailing_distance  # 例: 15円幅
    if new_sl > current_sl:  # SLは有利な方向にのみ動く
        update_sl(new_sl)
```

**パラメータ (XAUJPY)**:
- `trailing_start`: 30円（トレーリング開始利益）
- `trailing_distance`: 15円（価格からの距離）

#### 2. ブレークイーブン（建値撤退）
**目的**: 一定利益後、最悪でも損失ゼロにする

```python
# 利益が閾値を超えたら、SLを建値に移動
if profit >= breakeven_trigger:  # 例: +25円
    if current_sl < open_price:  # BUYの場合
        update_sl(open_price + buffer)  # 建値+スプレッド分
```

**パラメータ (XAUJPY)**:
- `breakeven_trigger`: 25円
- `breakeven_buffer`: 3円（スプレッド考慮）

#### 3. 分割決済（部分利確）
**目的**: 利益を確保しながら残りで大きく狙う

```python
# 第1TP到達で半分決済
if profit >= partial_tp1:  # 例: +45円
    close_partial(0.5)  # 50%決済
    move_sl_to_breakeven()

# 第2TP到達で残り決済
if profit >= partial_tp2:  # 例: +90円
    close_all()
```

**パラメータ (XAUJPY)**:
- `partial_tp1`: 45円（第1利確）
- `partial_tp2`: 90円（第2利確）
- `partial_ratio`: 0.5（第1利確時の決済比率）

---

### バックテスト結果比較

| 設定 | PF | FalseHold | TP | BE | SL | 備考 |
|------|-----|-----------|-----|-----|-----|------|
| v8.0 (元) | 0.98 | 60% | 123 | 0 | 192 | ベースライン |
| v9.0 BE=15 | 0.89 | 50.6% | 107 | 40 | 162 | BE早すぎ |
| v9.0 BE=25 | 0.93 | 57.2% | 115 | 20 | 183 | バランス型 |
| v9.0 BE=35 | 0.99 | 58.8% | 121 | 8 | 188 | 控えめ |

### 分析

**良い点:**
- FalseHold（SL到達）を60%→50-58%に削減可能
- BE機能によりSL損失を0円損失に転換

**課題:**
- BE発動が早すぎると、TPに到達するはずのトレードも0円で終了
- 結果としてPFは改善しないかわずかに悪化

---

## 5. 結論

**現状の最大の問題**: エントリー戦略の勝率が38%と低い

**v9.0機能の効果**:
- トレーリングストップ → 利益を守りながらSL回避
- ブレークイーブン → 損失ゼロ化（ただしTP機会も減少）
- 早期損切り強化 → SL到達前にカット

**次のステップ**:
1. **エントリーフィルター強化** - より厳選されたシグナルのみでエントリー
2. **ADX閾値の見直し** - トレンドが十分強い時のみ取引
3. **時間帯フィルター** - ゴールドが動きやすい時間帯に限定
4. **機械学習導入** - エントリー/エグジット判断の精度向上

---

## Sources
- [MQL5 Market - Forex Robots](https://www.mql5.com/en/market/mt5/expert)
- [Best Forex Robots 2025 - XAUBOT](https://xaubot.com/best-forex-robots-and-eas-in-2025/)
- [異国の殴り込みGOLD](https://fx-wintrade.com/product/mt4-mt5/ea/ng_v4/)
- [MT5 EA Ranking 2025](https://freesworder.net/mt5-ea-forward-ranking/)
